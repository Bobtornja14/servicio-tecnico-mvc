{% extends "base.html" %}

{% block content %}
<div class="login-container">
    <!-- Carrusel de Fondo -->
    <div id="backgroundCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="https://images.unsplash.com/photo-1581094794329-c8112a89af12?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" class="d-block w-100" alt="Técnicos trabajando">
            </div>
            <div class="carousel-item">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSdZXCKJqIqe5bQnYdIHdW8Xc2ngcIZ4hdSMw&s=1350&q=80" class="d-block w-100" alt="Reparación electrónica">
            </div>
            <div class="carousel-item">
                <img src="https://images.unsplash.com/photo-1581094271901-8022df4466f9?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" class="d-block w-100" alt="Atención al cliente">
            </div>
        </div>
    </div>

    <!-- Capa oscura con transparencia ajustada -->
    <div class="dark-overlay"></div>

    <!-- Contenido principal - Contenedor más estrecho -->
    <div class="container content-wrapper py-4">
        <div class="row justify-content-center">
            <div class="col-lg-10 col-xl-15">  <!-- Columnas más estrechas -->
                <div class="card login-card shadow">
                    <div class="row g-0">
                        <!-- Sección Informativa (40% del ancho) -->
                        <div class="col-md-5 info-section">
                            <div class="p-4 h-100 d-flex flex-column">
                                <div class="text-center mb-3">
                                    <i class="fas fa-tools logo-icon mb-2"></i>
                                    <h4 class="fw-bold">Sistema de servico tecnico</h4>
                                    <p class="small opacity-75">Solución integral para servicios técnicos</p>
                                    <br> <p class="fw-bold">¡Prueba este demo!</p>
                                </div>

                                <div class="features-list">
                                    <div class="feature-item mb-3">
                                        <i class="fas fa-check-circle feature-icon"></i>
                                        <div>
                                            <h6 class="mb-0">Gestión de stock e inventario</h6>
                                            <small class="opacity-75">Organización eficiente</small>
                                        </div>
                                    </div>
                                    <div class="feature-item mb-3">
                                        <i class="fas fa-check-circle feature-icon"></i>
                                        <div>
                                            <h6 class="mb-0">Seguimiento en tiempo real</h6>
                                            <small class="opacity-75">Monitoreo continuo</small>
                                        </div>
                                    </div>
                                    <div class="feature-item mb-3">
                                        <i class="fas fa-check-circle feature-icon"></i>
                                        <div>
                                            <h6 class="mb-0">Sitema de reportes y facturacion</h6>
                                            <small class="opacity-75">Separacion de vistas y permisos</small>
                                        </div>
                                    </div>
                                </div>

                                <div class="mt-auto pt-2">
                                    <div class="text-center small opacity-75">
                                        <p class="mb-1">Versión 2.1.0 - 2024</p>
                                        <div class="d-flex justify-content-center gap-2">
                                            <p>¡Gestiona tu empresa con este sistema personalizable y de servicio interno para una mayor eficiencia!</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Sección de Login (60% del ancho) -->
                        <div class="col-md-7 login-section">
                            <div class="p-4 h-100 d-flex flex-column">
                                <div class="text-center mb-4">
                                    <h4 class="fw-bold mb-1">Iniciar Sesión</h4>
                                    <small class="text-muted">Ingrese sus credenciales</small>
                                </div>

                                <form method="POST" class="needs-validation" novalidate>
                                    {{ form.hidden_tag() }}

                                    <div class="mb-3">
                                        <label class="form-label small fw-bold text-uppercase text-muted">Usuario</label>
                                        <div class="input-group">
                                            <span class="input-group-text bg-light"><i class="fas fa-user text-muted"></i></span>
                                            {{ form.email(class="form-control form-control-sm" + (" is-invalid" if form.email.errors else ""), placeholder="usuario@empresa.com") }}
                                        </div>
                                        {% if form.email.errors %}
                                            <div class="invalid-feedback small">
                                                {% for error in form.email.errors %}{{ error }}{% endfor %}
                                            </div>
                                        {% endif %}
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label small fw-bold text-uppercase text-muted">Contraseña</label>
                                        <div class="input-group">
                                            <span class="input-group-text bg-light"><i class="fas fa-lock text-muted"></i></span>
                                            {{ form.password(class="form-control form-control-sm" + (" is-invalid" if form.password.errors else ""), placeholder="••••••••") }}
                                        </div>
                                        {% if form.password.errors %}
                                            <div class="invalid-feedback small">
                                                {% for error in form.password.errors %}{{ error }}{% endfor %}
                                            </div>
                                        {% endif %}
                                    </div>

                                    <div class="d-flex justify-content-between align-items-center mb-4">

                                    </div>

                                    <button type="submit" class="btn btn-primary w-100 mb-3 py-2">
                                        <i class="fas fa-sign-in-alt me-1"></i> Ingresar
                                    </button>


                                </form>

                                <div class="demo-accounts small mt-auto">
                                    <div class="text-center text-muted mb-2">Cuentas de demostración <br> ¡pruébalo!</div>
                                    <div class="row g-2">
                                        <div class="col-6">
                                            <div class="border p-2 rounded bg-light">
                                                <span class="badge bg-danger small">Admin</span>
                                                <div class="mt-1">
                                                    <div class="small">admin@servicio.com</div>
                                                    <div class="small">admin123</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="border p-2 rounded bg-light">
                                                <span class="badge bg-primary small">Técnico</span>
                                                <div class="mt-1">
                                                    <div class="small">tecnico@servicio.com</div>
                                                    <div class="small">tecnico123</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="text-center mt-3 small text-white-50">
                    <p class="mb-0">© 2024 ST-ESR. <a href="#" class="text-white-50 text-decoration-none">Términos</a> | <a href="#" class="text-white-50 text-decoration-none">Privacidad</a></p>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .login-container {
        position: relative;
        min-height: 100vh;
        overflow: hidden;
    }

    #backgroundCarousel {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
    }

    #backgroundCarousel .carousel-item {
        height: 100vh;
    }

    #backgroundCarousel .carousel-item img {
        object-fit: cover;
        height: 100%;
        width: 100%;
        filter: brightness(0.7);
    }

    .dark-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);  /* Transparencia ajustada */
        z-index: 1;
    }

    .content-wrapper {
        position: relative;
        z-index: 2;
        padding-top: 2rem;
        padding-bottom: 2rem;
    }

    .login-card {
        border-radius: 12px;
        overflow: hidden;
        border: none;
    }

    .info-section {
        background: rgba(44, 62, 80, 0.85);  /* Más transparente */
        color: white;
        backdrop-filter: blur(3px);
    }

    .login-section {
        background-color: rgba(255, 255, 255, 0.95);  /* Blanco semi-transparente */
        backdrop-filter: blur(2px);
    }

    .logo-icon {
        font-size: 2.2rem;
        color: rgba(255, 255, 255, 0.9);
    }

    .feature-item {
        display: flex;
        align-items: center;
        gap: 0.8rem;
    }

    .feature-icon {
        color: rgba(255, 255, 255, 0.8);
        font-size: 1rem;
    }

    .demo-accounts .badge {
        font-size: 0.65rem;
        font-weight: 500;
    }

    @media (max-width: 768px) {
        .login-card {
            margin: 0 1rem;
        }

        .info-section, .login-section {
            padding: 1.5rem;
        }

        .info-section {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
    }
</style>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Inicializar el carrusel de fondo
    document.addEventListener('DOMContentLoaded', function() {
        var backgroundCarousel = new bootstrap.Carousel(document.getElementById('backgroundCarousel'), {
            interval: 5000,
            ride: 'carousel',
            wrap: true,
            pause: 'hover'
        });
    });
</script>
{% endblock %}